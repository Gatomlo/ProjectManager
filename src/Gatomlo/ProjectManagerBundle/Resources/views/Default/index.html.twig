{% extends "base.html.twig" %}
{% block breadcrumb %}
  <li class="breadcrumb-item active">Accueil </li>
{% endblock %}
{% block body %}

<div class="row">
  <div class="col">
    <div id='plan'></div>
  </div>
  <div class="col">
    <div id='deadline'></div>
  </div>
</div>

{% endblock %}
{% block scripts %}
  <script>
    $('#deadline').fullCalendar({
    weekends: false,
    titleFormat: '[Echéances : ]MMMM YYYY',
    eventSources: [
      {
        url: '{{ path('gatomlo_project_manager_deadline_projects_json')}}',
        type: 'Get',

        error: function() {
          alert('Il y a eu une erreur lors de la récupération des projets!');
        },
        color: 'blue',   // a non-ajax option
        textColor: 'black' // a non-ajax option
      },
      {
        url: '{{ path('gatomlo_project_manager_deadline_tasks_json')}}',
        type: 'Get',

        error: function() {
          alert('Il y a eu une erreur lors de la récupération des tâches!');
        },
        color: 'green',   // a non-ajax option
        textColor: 'black' // a non-ajax option
      }
    ],
    eventClick: function(calEvent, jsEvent, view) {
      window.location = calEvent.url;
      // alert(calEvent.url);

  }
  });
  $('#plan').fullCalendar({

  defaultView: 'listDay',
  displayEventTime:false,
  views: {
  listDay: {
    type: 'list',
    duration: { days: 1 },
    buttonText: '4 day'
  }
},
  titleFormat: '[Tâches plannifiées : ]D MMMM YYYY',
  eventSources: [

    // your event source
    {
      url: '{{ path('gatomlo_project_manager_planned_tasks_json')}}',
      type: 'Get',

      error: function() {
        alert('Il y a eu une erreur lors de la récupération des tâches!');
      },
      color: 'blue',   // a non-ajax option
      textColor: 'black' // a non-ajax option
    }

    // any other sources...

  ]
});
  </script>
{% endblock %}
